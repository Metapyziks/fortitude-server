<?
	if (session == null || session.Rank != Rank.Owner) {
        response.Redirect("404");
    }

    Include("parts/functions.html");
	getPageStart("Cache List", "parts/admin_cache_script.js", null);
	Include("parts/header.html");
	Include ("parts/sidebar.html"); 

?>
		<div id = "content">
			<h1>Cache List</h1>
			<p style = "text-align: right; margin-right: 20px;">
				<a onclick = "showTab('owned')">Owned caches</a> | <a onclick = "showTab('unowned')">Unowned caches</a> | <a onclick = "showTab('admin')">Outlaw camps</a>
			</p>
			<ul class = "news">
				<li id = "owned">
					<? getCacheSectionByType("owned", "User Caches"); ?>
				</li>
				<li id = "unowned">
					<? getCacheSectionByType("unowned", "Unowned User Caches"); ?>
				</li>
				<li id = "admin">
					<? getCacheSectionByType("admin", "Outlaw Camps / Non Player Caches"); ?>
				</li>
				<li id = "special">
					<h1>Current Special Caches</h1>
					<table border="0" cellpadding="4" style = "text-align: center;">
						<tr>
							<th>ID</th>
							<th>Name</th>
							<th>Expiry Date</th>
							<th>Balance</th>
							<th>Reward</th>
							<th>Mac Address</th>
						</tr>
<?

		var specialEvents = DatabaseManager.SelectAll<SpecialEvent>();

		foreach (var evnt in specialEvents) { 
?>
					  	<tr>
							<td>{$evnt.SpecialEventID}</td>
							<td>{$evnt.Name}</td>
							<td>{$evnt.Expires}</td>
							<td>{$evnt.Balance}</td>
							<td>{$evnt.Reward}</td>
							<td>{$evnt.MACAddress}</td>
						</tr>
<?		} ?>
					</table>
				</li>
				<li id = "result">
				</li>
			</ul>

		</div> <!-- content -->
		
	<? Include ("parts/footer.html"); ?>
