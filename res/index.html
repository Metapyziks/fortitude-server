<!DOCTYPE html>

<? 
	Player player = null;
	List<Cache> caches = null;

	// If the user is logged in and verified
	if (session != null && session.Rank != Rank.Unverified) {
		// Find the player data for the user
		player = DatabaseManager.SelectFirst<Player>(x => x.AccountID == session.AccountID);

		// Get a list of all caches owned by the user (i.e. have a matching AccountID)
		caches = DatabaseManager.Select<Cache>(x => x.AccountID == session.AccountID);
	}
?>

<html>
<head>
	<title>
		Fortitude
	</title>
	<link rel="stylesheet" type="text/css" href="stylesheet.css">
	<!-- <script type="text/javascript" src="script.js"></script> -->
</head>

<body>
<?
	if (session != null && session.Rank >= Rank.Admin) {
?>
		<div id = "topbar">
			<a href="#">Admin links</a> :: <a href="#">Admin links</a> :: <a href="#">Admin links</a> :: <a href="#">Admin links</a> :: <a href="#">Admin links</a> 
		</div>
<?
	}
?>
	<div id = "wrapper">
<? Include("/header.html"); ?>

		<div id = "sidebar">
			<ul>
<? if (session != null) { ?>
				<li class = "sidebar_section">
					<h1>{$account.Username}</h1>
					<img src="/images/avatars/{$account.AvatarID}-normal.gif" class="avatar" />
					<br />
					<span>
						Elite warlorld
					</span>
					<p>	
						{$caches.Sum(x => x.Balance) + player.Balance} soldiers<br />
						{$caches.Count} cache{$(caches.Count != 1 ? "s" : "")}
					</p>
					<div style="clear: both;"></div>
				</li> <!-- username (account summary) -->
<? } ?>
				<li class = "sidebar_section">
					<h1>Search</h1>
					<form>
						<input type="text"></input>
						<button>&gt;&gt;</button>
						<div style="clear: both;"></div>
					</form>
				</li> <!-- search -->
<?  // If the user is logged in and verified...
	if (session != null && session.Rank != Rank.Unverified) {
?>
				<li class = "sidebar_section">
					<h1>Caches</h1>
					<ul>
<?
		// Loop through the first 5 caches and display their info
		int count = 0;
		foreach (var cache in caches) {
?>
						<li>
							<span>{$cache.Name}</span>
							<p>
								{$cache.Balance} soldiers | <a href="#">History</a> | <a href="#">View on Map</a>
							</p>
						</li>
<?
			count = count + 1;
			if (count == 5) break;
		}
?>
						<li class = "last_child">
							<p>
								Showing {$Math.Min(5, caches.Count)} most active caches.
							</p>
							<p>
								<a href="#">View all caches</a>
							</p>
						</li>
					</ul>
				</li> <!-- caches -->
				<li class = "sidebar_section">
					<h1>Recent News</h1>
					<ul>
						<li>
							<span>Username</span>
							<p>
								<a href="#">
									RE: This very interesting topic
								</a>
							</p>
						</li>
						<li>
							<span>Fort Bastion</span>
							<p>
								<a href="#">
									A cache has been conquered!
								</a>
							</p>
						</li>
						<li>
							<span>Fort Bastion</span>
							<p>
								<a href="#">
									A cache was successfully defended!
								</a>
							</p>
						</li>
						<li>
							<span>Username</span>
							<p>
								<a href="#">
									RE: This very interesting topic
								</a>
							</p>
						</li>
						<li>
							<span>Fort Bastion</span>
							<p>
								<a href="#">
									A cache was successfully defended!
								</a>
							</p>
						</li>
						<li class = "last_child">
							<p>
								Showing 5 most recent events.
							</p>
							<p>
								<a href="#">View all events</a>
							</p>
						</li>						
					</ul>
				</li> <!-- recent news -->
<?
	}
?>
			</ul>	
		</div> <!-- sidebar -->
		
		<div id = "content">
			<h1>Page Title</h1>
			<p>
				Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi ut eros turpis, ac adipiscing lorem. Sed semper, quam ac commodo lacinia, orci sapien venenatis sapien, quis dictum orci nisl sed nunc. Sed vitae gravida nisl. Donec lacinia sollicitudin dolor in imperdiet. Maecenas scelerisque, ipsum sed tempus vulputate, magna ligula venenatis velit, sit amet tempor dui erat porttitor urna. Sed justo nisl, aliquam eget accumsan vitae, molestie vel orci. In dictum mi id sem fermentum quis egestas arcu gravida. Nulla facilisi. Duis bibendum, elit sed tempus dignissim, risus tellus sodales lacus, vitae faucibus dolor orci eu ante. Aenean sollicitudin placerat odio, vel sagittis arcu hendrerit nec. Vestibulum lacinia, quam iaculis vehicula ornare, lectus ipsum porttitor felis, eget adipiscing nibh diam at nisi. Donec vel tortor non tellus convallis hendrerit at faucibus dolor. Aenean eu diam vel eros elementum sagittis nec quis dui. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.
			</p>
			<p>
				Vivamus eu quam arcu. Phasellus tempor, arcu eget mollis ultrices, mauris enim facilisis nulla, vitae euismod ipsum lectus et enim. Aenean nunc nibh, pharetra ac vulputate sed, rhoncus et diam. Morbi rutrum ligula ut est ullamcorper nec tempor leo vulputate. Phasellus metus urna, porta et venenatis ac, hendrerit eu risus. Maecenas rhoncus, dui sit amet fermentum eleifend, justo ipsum convallis nisl, id euismod tellus erat id nunc. Donec dapibus mi laoreet felis ullamcorper auctor. Curabitur nunc dolor, faucibus non dignissim id, ullamcorper eget libero. Sed vitae euismod magna. Sed condimentum lobortis facilisis.
			</p>
			<p>
				Pellentesque quis augue purus. Morbi tincidunt ullamcorper ligula sit amet laoreet. Nunc eu elit nec orci mattis tincidunt. Mauris ullamcorper, risus sed fermentum consequat, enim dui pulvinar tellus, id mollis ligula libero et tortor. Praesent tempus fringilla scelerisque. Aliquam erat volutpat. Sed commodo fermentum arcu, et consequat quam sollicitudin in. Sed at magna elit, a congue leo. Fusce semper felis id tortor ullamcorper pulvinar.
			</p>
			<p>
				Vivamus quis nibh sapien. Aliquam mollis velit a dolor interdum et vulputate orci tempor. In pellentesque purus id lectus viverra tempus. Sed pharetra arcu rutrum enim adipiscing nec iaculis libero fringilla. Vivamus posuere fringilla neque, eget posuere turpis auctor sit amet. Etiam tempus pretium accumsan. Aenean vitae eros ac felis placerat pulvinar.
			</p>
			<p>
				Vestibulum pharetra sodales ante sed vestibulum. Sed rutrum, lectus non vulputate aliquam, libero tortor varius ligula, ut facilisis metus dolor sed est. Duis a tellus lacus. Donec consequat rhoncus felis, at pharetra velit dapibus vitae. Mauris interdum scelerisque dui ac malesuada. Vivamus dui purus, fermentum vitae convallis non, interdum non nisi. Donec molestie lorem non nisl volutpat sodales. Vivamus nec pellentesque enim. Suspendisse potenti. Vestibulum laoreet quam nec justo dapibus eu aliquet nibh consectetur. Morbi fermentum bibendum enim sed bibendum. Fusce enim velit, semper sed fringilla sed, aliquet id risus. Suspendisse potenti. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Aliquam lacinia tellus ac quam lacinia at aliquet nisi convallis.
			</p>
		</div> <!-- content -->
		
		<div style = "clear: both;"></div>
		
		<div id = "footer">
		</div> <!-- footer -->
		
	</div> <!-- wrapper -->
</body>
